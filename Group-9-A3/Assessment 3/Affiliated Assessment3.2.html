<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- 引用 -->
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" 
   integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
   <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
   <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js" 
       integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
   <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" 
   integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
   <meta charset="UTF-8">
    <title>Register</title>
    <style>
        #h-btn{
            display:inline-block;
            /*border:1px solid red;*/
            width:30px;
            height:33px;
            position:absolute;
            right:2px;
            z-index:100;
            cursor: pointer;
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button{
            -webkit-appearance: none;
        }
    </style>
    <title>Register</title>
</head>
<body>
    <button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Open the registration page
    </button>
    <div class="modal" id="exampleModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true" style="display: block; margin-right: 20px;">&times;</span> 
                </button>
                <h4 class="modal-title" id="myModallabel" style="font-family: 宋体; font-size: 20px; font-weight: 800; margin-left: 10px; margin-top: 10px;">Welcome to register</h4>
                <div class="modal-body">
                    <form class="form-group" role="form">
                        <div class="form-group input-group has-info has-feedback">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input type="number" class="form-control" name="username" placeholder="Please enter the account number"/>
                            <span id="u_remove" class="glyphicon glyphicon-remove form-control-feedback"></span>
                            <span id="h-btn" title="Clear account"></span>
                        </div>
                        <div class="form-group input-group has-info has-feedback">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input type="password" id="pwd" class="form-control" name="password" placeholder="Please input a password" />
                            <span id="eye" class="glyphicon glyphicon-eye-open form-control-feedback"></span>
                            <span id="h-btn" title="view" ></span>
                        </div>
                        <div class="form-group input-group has-info has-feedback">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input type="password" id="pwd2" class="form-control" placeholder="Please enter the password again" />
                            <span id="eye2" class="glyphicon glyphicon-eye-open form-control-feedback"></span>
                            <span id="h-btn" title="View secondary password" ></span>
                        </div>
                        <div class="form-group input-group has-info has-feedback">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-phone-alt"></i></span>
                            <input type="number" class="form-control" name="phone" placeholder="Please enter the correct email address" />
                        </div>
                        <div class="form-group input-group has-info has-feedback">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input type="text" id="code" class="form-control" name="code" placeholder="Enter email verification code" />
                            <span id="h-btn" class="btn btn-success" style="width: 150px; right: 1px;">Get email code </span>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">                        
                    <a href="Affiliated Assessment3.1.html"><button type="button" id="reg_btn" class="btn btn-primary">Register</button></a>
                    <a href="Home page.html"><button type="button" class="btn btn-default" data-dismiss="modal">Return</button></a>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
        $(function () {
            // $("#exampleModal").show();

            $("#u_remove").hide();
            $("input[name='username']").on("input",function () {
                if($(this).val().length > 0){
                    $("#u_remove").show();
                }else {
                    $("#u_remove").hide();
                }
            });
            $("span[title='Clear account']").click("input",function () {
                $("input[type='number']").val("");
                $("#u_remove").hide();
            });

            $("#eye").hide();
            $("input[name='password']").on("input",function () {
                if($(this).val().length > 0){
                    $("#eye").show();
                }else {
                    $("#eye").hide();
                }
            });
            $("span[title='view']").click(function () {
                if($("#pwd").val().length > 0){
                    if($("#pwd").attr("type") == "password"){
                        $("#pwd").attr("type","text");
                        $("#eye").attr("class","glyphicon glyphicon-eye-close form-control-feedback");
                    }else{
                        $("#pwd").attr("type","password");
                        $("#eye").attr("class","glyphicon glyphicon-eye-open form-control-feedback");
                    }
                }
            });

            $("#eye2").hide();
            $("input[name='password2']").on("input",function () {
                if($(this).val().length > 0){
                    $("#eye2").show();
                }else {
                    $("#eye2").hide();
                }
            });
            $("span[title='View secondary password']").click(function () {
                if($("#pwd2").val().length > 0){
                    if($("#pwd2").attr("type") == "password"){
                        $("#pwd2").attr("type","text");
                        $("#eye2").attr("class","glyphicon glyphicon-eye-close form-control-feedback");
                    }else{
                        $("#pwd2").attr("type","password");
                        $("#eye2").attr("class","glyphicon glyphicon-eye-open form-control-feedback");
                    }
                }
            });

            $("span[class='btn btn-success']").attr('disabled', true);
            $("input[name='phone']").on("input",function () {
                function checkPhone(phone) {
                    var check = /^[1][3,4,5,7,8][0-9]{9}$/;
                    if(!check.test(phone)){
                        return false;
                    }else {
                        return true;
                    }
                }
                if(checkPhone($(this).val())){
                    $("span[class='btn btn-success']").attr('disabled', false);
                    $("span[class='btn btn-success']").click(function (event) {
                        $("input[name='phone']").attr('disabled', true);
                        var countdown = 60;
                        settime($(this));
                        function settime(obj) {
                            if(countdown == 0){
                                $("input[name='phone']").attr('disabled', false);
                                obj.attr('disabled', false);
                                $(obj).html("Get verification code");
                                return ;
                            }else{
                                obj.attr('disabled', true);
                                obj.html("send again(" + countdown + ")");
                                countdown--;
                            }
                            setTimeout(function () {
                                settime(obj);
                            },1000)
                        }
                    });
                }else {
                    $("span[class='btn btn-success']").attr('disabled', true);
                }
            });
            $("#reg_btn").click(function(){
                var pwd = $("#pwd").val().trim();
                var pwd2 = $("#pwd2").val().trim();
                if(pwd == pwd2){
                    $.ajax({

                    });
                }else{
                    alert("The password is different, please verify!");
                }
            });

        });

    </script>
</body>
</html>